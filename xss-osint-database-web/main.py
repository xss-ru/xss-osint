from flask import Flask, render_template, jsonify, request
import os

app = Flask(__name__, 
            template_folder='.',  # Искать шаблоны в текущей директории
            static_folder='.',    # Искать статические файлы в текущей директории
            static_url_path='')   # Убрать префикс /static

@app.route('/')
def index():
    return render_template('web.html')

@app.route('/api/databases')
def get_databases():
    databases = [
        {"name": "Сбербанк (клиенты)", "count": "~200 млн", "desc": "Клиентская база Сбербанка России"},
        {"name": "DNS-shop", "count": "11 млн", "desc": "База покупателей интернет-магазина электроники"},
        {"name": "2ГИС (сотрудники)", "count": "225 тыс", "desc": "Данные сотрудников компании 2ГИС"},
        {"name": "HeadHunter (hh.ru)", "count": "40 млн", "desc": "База резюме и вакансий"},
        {"name": "МТС (клиенты)", "count": "3.7 млн", "desc": "Абонентская база мобильного оператора"},
        {"name": "Тинькофф Банк", "count": "30 млн", "desc": "Клиентская база Тинькофф банка"},
        {"name": "Банк Открытие", "count": "10 млн", "desc": "Данные клиентов банка"},
        {"name": "QIWI кошельки", "count": "22 млн", "desc": "База электронных кошельков QIWI"},
        {"name": "ВкусВилл", "count": "2.5 млн", "desc": "База покупателей продуктовой сети"},
        {"name": "Ашан (сотрудники)", "count": "1.4 тыс", "desc": "Данные сотрудников гипермаркетов"},
        {"name": "Wildberries (фулл)", "count": "50 млн", "desc": "Полная база клиентов маркетплейса"},
        {"name": "Евросеть", "count": "20 млн", "desc": "База клиентов сети салонов связи"},
        {"name": "Ситилинк", "count": "2.8 млн", "desc": "База покупателей компьютерной техники"},
        {"name": "Гемотест (лаборатория)", "count": "400 тыс", "desc": "Медицинские данные лаборатории"},
        {"name": "Столото (лотореи)", "count": "3 млн", "desc": "База участников лотерей"},
        {"name": "ВКонтакте (устаревшие базы)", "count": "100 млн+", "desc": "Архивные данные пользователей"},
        {"name": "Яндекс (устаревшие хэши)", "count": "50 млн", "desc": "Старые хэши паролей"},
        {"name": "Дром (Drom.ru)", "count": "12.5 млн", "desc": "База пользователей автомобильного портала"},
        {"name": "Билеты.ру (концерты)", "count": "7 млн", "desc": "Данные покупателей билетов"},
        {"name": "Спортмастер", "count": "2.3 млн", "desc": "Клиенты спортивных магазинов"},
        {"name": "М.Видео (сотрудники)", "count": "1.3 тыс", "desc": "Данные сотрудников сети"},
        {"name": "Национальная Медиа Группа", "count": "1.1 тыс", "desc": "Данные сотрудников медиахолдинга"},
        {"name": "Совкомбанк", "count": "5.7 млн", "desc": "Клиентская база банка"},
        {"name": "ТКС (Tinkoff Black)", "count": "30 млн", "desc": "Премиальные клиенты Тинькофф"},
        {"name": "IVI (ivi.ru)", "count": "5.5 млн", "desc": "База подписчиков видеосервиса"},
        {"name": "Яндекс.Музыка", "count": "10 млн", "desc": "Данные пользователей музыкального сервиса"},
        {"name": "Delivery Club / Яндекс.Еда", "count": "22 млн", "desc": "База пользователей доставки еды"},
        {"name": "Юла (Yula)", "count": "30 млн", "desc": "Пользователи площадки объявлений"},
        {"name": "Avito (учетки)", "count": "35 млн", "desc": "Учетные записи пользователей"},
        {"name": "Магнит (персонал)", "count": "130 тыс", "desc": "Данные сотрудников торговой сети"},
        {"name": "Госуслуги (данные)", "count": "~140 млн", "desc": "Данные из портала госуслуг"},
        {"name": "Билайн (абоненты)", "count": "8.7 млн", "desc": "База абонентов сотового оператора"},
        {"name": "МегаФон (база)", "count": "1 млн", "desc": "Частичная база оператора"},
        {"name": "Tele2 (полная база)", "count": "126 млн", "desc": "Полная абонентская база"},
        {"name": "Альфа-Банк (клиенты)", "count": "3.5 тыс", "desc": "Выборка клиентов банка"},
        {"name": "Почта Банк", "count": "780 тыс", "desc": "Клиентская база банка"},
        {"name": "Райффайзенбанк", "count": "800 тыс", "desc": "База клиентов банка"},
        {"name": "Яндекс.Такси (партнеры)", "count": "15 млн", "desc": "Данные водителей-партнеров"},
        {"name": "Ситимобил", "count": "33 млн", "desc": "База пользователей такси-сервиса"},
        {"name": "Перекресток", "count": "2.7 млн", "desc": "Клиенты продуктовой сети"},
        {"name": "Лента (база)", "count": "130 тыс", "desc": "Данные покупателей сети"},
        {"name": "Детский мир", "count": "567 тыс", "desc": "Клиенты детских магазинов"},
        {"name": "Lamoda", "count": "11 млн", "desc": "База покупателей одежды и обуви"},
        {"name": "Ozon", "count": "9 млн", "desc": "Пользователи маркетплейса"},
        {"name": "Связной", "count": "22 млн", "desc": "Клиенты сети салонов связи"},
        {"name": "М.Видео", "count": "3.4 млн", "desc": "Покупатели электроники"},
        {"name": "Эльдорадо", "count": "5.6 млн", "desc": "Клиенты сети магазинов техники"},
        {"name": "Онлайнер", "count": "4.2 млн", "desc": "Пользователи портала недвижимости"},
        {"name": "ТопШоп (TopShop)", "count": "2.1 млн", "desc": "База покупателей одежды"},
        {"name": "Инвитро", "count": "4.5 млн", "desc": "Данные медицинской лаборатории"},
        {"name": "Сбераптека", "count": "220 тыс", "desc": "Клиенты аптечной сети"},
        {"name": "1xBet", "count": "28 млн", "desc": "Игроки букмекерской конторы"},
        {"name": "Фонбет", "count": "1.2 млн", "desc": "Пользователи букмекерской компании"},
        {"name": "Одноклассники (утечки)", "count": "30 млн+", "desc": "Утекшие данные социальной сети"},
        {"name": "Mail.ru Group (старые)", "count": "25 млн", "desc": "Архивные данные почтового сервиса"},
        {"name": "Rambler (старая база)", "count": "98 млн", "desc": "Устаревшая база портала"},
        {"name": "Пикабу (Pikabu)", "count": "8.5 млн", "desc": "Пользователи развлекательной платформы"},
        {"name": "Авто.ру", "count": "28 млн", "desc": "База автомобильного портала"},
        {"name": "НН.ру (городской портал)", "count": "2.7 млн", "desc": "Данные городского портала"},
        {"name": "Kassir.ru", "count": "2.1 млн", "desc": "Покупатели билетов на мероприятия"},
        {"name": "Афиша.ру", "count": "1.2 млн", "desc": "Пользователи развлекательного портала"},
        {"name": "Adidas Russia", "count": "340 тыс", "desc": "Клиенты спортивного бренда"},
        {"name": "Reebok Russia", "count": "180 тыс", "desc": "Покупатели спортивной одежды"},
        {"name": "СберЗдоровье", "count": "500 тыс", "desc": "Данные медицинского сервиса"},
        {"name": "Яндекс.Здоровье", "count": "200 тыс", "desc": "Пользователи медицинской платформы"},
        {"name": "Газпромбанк (старая)", "count": "15 тыс", "desc": "Архивные данные банка"},
        {"name": "МКБ (Московский Кредитный Банк)", "count": "1.2 млн", "desc": "Клиентская база банка"},
        {"name": "Хоум Кредит Банк", "count": "500 тыс", "desc": "Данные клиентов банка"},
        {"name": "Ренессанс Кредит", "count": "4.8 млн", "desc": "База заемщиков банка"},
        {"name": "Яндекс.Плюс", "count": "15 млн", "desc": "Подписчики премиум-сервиса"},
        {"name": "Кинопоиск (учетки)", "count": "8 млн", "desc": "Пользователи киносервиса"},
        {"name": "More.tv", "count": "2.1 млн", "desc": "Подписчики видеосервиса"},
        {"name": "Start (стриминг)", "count": "1.8 млн", "desc": "Пользователи стриминговой платформы"},
        {"name": "VK Музыка", "count": "12 млн", "desc": "Слушатели музыкального сервиса"},
        {"name": "Zvuk (стриминг)", "count": "1.5 млн", "desc": "Пользователи музыкальной платформы"},
        {"name": "СберМаркет", "count": "4.2 млн", "desc": "Клиенты службы доставки продуктов"},
        {"name": "Утконос", "count": "1.3 млн", "desc": "База покупателей доставки еды"},
        {"name": "Азбука Вкуса", "count": "350 тыс", "desc": "Клиенты премиальной продуктовой сети"},
        {"name": "Метро Кэш энд Керри (сотрудники)", "count": "15 тыс", "desc": "Данные сотрудников торговой сети"},
        {"name": "Яндекс.Лавка", "count": "2.8 млн", "desc": "Пользователи службы доставки продуктов"},
        {"name": "Вайлдберриз (WB)", "count": "34 млн", "desc": "Альтернативная база маркетплейса"},
        {"name": "Ozon (seller base)", "count": "1.2 млн", "desc": "База продавцов маркетплейса"},
        {"name": "Яндекс.Деньги (старая)", "count": "45 млн", "desc": "Архивные данные платежной системы"},
        {"name": "Вебмани (WM)", "count": "25 млн", "desc": "Данные пользователей платежной системы"},
        {"name": "PayPal Russia", "count": "4.5 млн", "desc": "Пользователи платежной системы"},
        {"name": "СБП (Система быстрых платежей)", "count": "16 млн", "desc": "Данные из платежной системы"},
        {"name": "Налоговая (служебные данные)", "count": "неизв", "desc": "Служебная информация налоговой службы"},
        {"name": "ПФР (данные пенсионеров)", "count": "неизв", "desc": "Данные пенсионного фонда"},
        {"name": "МВД (служебные базы)", "count": "неизв", "desc": "Служебные базы данных"},
        {"name": "РЖД (пассажиры)", "count": "40 млн", "desc": "Данные пассажиров железной дороги"},
        {"name": "Аэрофлот (пассажиры)", "count": "30 млн", "desc": "База пассажиров авиакомпании"},
        {"name": "S7 Airlines", "count": "12 млн", "desc": "Данные пассажиров авиакомпании"},
        {"name": "Уральские авиалинии", "count": "5 млн", "desc": "Пассажиры авиакомпании"},
        {"name": "Ростелеком", "count": "3.3 млн", "desc": "Абоненты телекоммуникационной компании"},
        {"name": "Дом.ру", "count": "1.8 млн", "desc": "Пользователи интернет-провайдера"},
        {"name": "МГТС", "count": "2.4 млн", "desc": "Абоненты городской телефонной сети"},
        {"name": "Корус (консалтинг)", "count": "150 тыс", "desc": "Данные консалтинговой компании"},
        {"name": "Финам (брокер)", "count": "300 тыс", "desc": "Клиенты брокерской компании"},
        {"name": "БКС Брокер", "count": "500 тыс", "desc": "Пользователи брокерских услуг"},
        {"name": "Открытие Брокер", "count": "200 тыс", "desc": "Клиенты брокерской компании"},
        {"name": "ВТБ Капитал", "count": "100 тыс", "desc": "Данные инвестиционной компании"},
        {"name": "Сбер CIB", "count": "80 тыс", "desc": "Клиенты инвестиционного бизнеса"},
        {"name": "Роснефть (сотрудники)", "count": "1.5 млн", "desc": "Данные сотрудников нефтяной компании"},
        {"name": "Газпром (служебные данные)", "count": "неизв", "desc": "Внутренние данные компании"},
        {"name": "Лукойл (сотрудники)", "count": "200 тыс", "desc": "Персонал нефтяной компании"},
        {"name": "Росатом (контрагенты)", "count": "неизв", "desc": "Данные подрядчиков корпорации"},
        {"name": "Роскосмос (подрядчики)", "count": "неизв", "desc": "Информация о контрагентах"},
        {"name": "Рособрнадзор (ЕГЭ данные)", "count": "неизв", "desc": "Данные системы образования"}
    ]
    return jsonify(databases)

@app.route('/api/search')
def search_databases():
    query = request.args.get('q', '').lower()
    if not query:
        return jsonify([])
    
    databases = get_databases().json
    results = [db for db in databases if query in db['name'].lower() or query in db['desc'].lower()]
    return jsonify(results)

if __name__ == '__main__':
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port, debug=True)
